# =======================
#  Stash æ——èˆ°çº§å…¨åŠŸèƒ½é…ç½®
#  æè‡´æ€§èƒ½ / ç¨³å®š / ç¾è§‚ / é€æ˜
# =======================

# [è®¢é˜…ä¿¡æ¯]
subscribe-url: null

# [è®¢é˜…èŠ‚ç‚¹]
proxy-providers:
  subscribe:
    url: http://sub.store/download/collection/Stach
    interval: 86400
    benchmark-url: http://connectivitycheck.gstatic.com/generate_204
    benchmark-timeout: 5

# [é€šç”¨è®¾ç½®]
mode: rule
log-level: info

# [DNS è®¾ç½®ï¼šä¸‰å±‚ç»“æ„ï¼Œæè‡´ç¨³å®š]
dns:
  enable: true
  listen: 0.0.0.0:1053
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  skip-cert-verify: true

  # ç¬¬ä¸€å±‚ï¼šå›½å†… DoHï¼ˆä¼˜å…ˆï¼Œæœ€å¿«ï¼‰
  nameserver:
    - https://doh.pub/dns-query
    - https://dns.alidns.com/dns-query

  # ç¬¬äºŒå±‚ï¼šå›½é™… DoHï¼ˆfallbackï¼‰
  fallback:
    - https://cloudflare-dns.com/dns-query
    - https://dns.google/dns-query
    - https://1.1.1.1/dns-query

  # ç¬¬ä¸‰å±‚ï¼šIP å…œåº• + é˜²æ±¡æŸ“
  fallback-filter:
    geoip: true
    geoip-code: CN
    ipcidr:
      - 0.0.0.0/0
    domain:
      - "+.google.com"
      - "+.github.com"
      - "+.openai.com"

  default-nameserver:
    - 223.5.5.5
    - 119.29.29.29
    - 114.114.114.114

  fake-ip-filter:
    - '*.lan'
    - +.local
    - +.srv.nintendo.net
    - +.stun.playstation.net
    - +.msftconnecttest.com
    - +.msftncsi.com
    - +.xboxlive.com
    - msftconnecttest.com
    - xbox.*.microsoft.com
    - '*.battlenet.com.cn'
    - '*.battlenet.com'
    - '*.blzstatic.cn'
    - '*.battle.net'

# [ç­–ç•¥ç»„ï¼šæ——èˆ°çº§å…¨åŠŸèƒ½ç»“æ„]

proxy-groups:
  # â€”â€” ä¸»åŠ›é€‰æ‹©åŒº â€”â€”
  - name: è‡ªè¡Œé€‰æ‹©
    type: select
    include-all: true
    filter: ^
    lazy: true
    icon: https://raw.githubusercontent.com/Centralmatrix3/Matrix-io/master/Gallery/Color/Static.png

  - name: è‡ªåŠ¨é€‰æ‹©
    type: url-test
    include-all: true
    filter: "^"
    tolerance: 50
    interval: 1800
    lazy: true
    icon: https://raw.githubusercontent.com/Centralmatrix3/Matrix-io/master/Gallery/Color/Available.png

  # â€”â€” ç¨³å®šä¼˜é€‰ï¼šæ ¸å¿ƒ failoverï¼Œæ‰€æœ‰æœåŠ¡ä¼˜å…ˆèµ°è¿™é‡Œ â€”â€”
  - name: ç¨³å®šä¼˜é€‰
    type: fallback
    proxies:
      - è‡ªåŠ¨é€‰æ‹©
      - åœ°åŒºèŠ‚ç‚¹
      - è‡ªè¡Œé€‰æ‹©
      - DIRECT
    interval: 300
    lazy: true
    icon: https://raw.githubusercontent.com/Centralmatrix3/Matrix-io/master/Gallery/Color/Available.png

  # â€”â€” æœåŠ¡åˆ†æµåŒº â€”â€”
  - name: åª’ä½“æœåŠ¡
    type: select
    proxies:
      - DIRECT
      - ç¨³å®šä¼˜é€‰
      - åœ°åŒºèŠ‚ç‚¹
      - è‡ªè¡Œé€‰æ‹©
    icon: https://raw.githubusercontent.com/Centralmatrix3/Matrix-io/master/Gallery/Color/Streaming.png

  - name: è‹¹æœæœåŠ¡
    type: select
    proxies:
      - DIRECT
      - ç¨³å®šä¼˜é€‰
      - åœ°åŒºèŠ‚ç‚¹
      - è‡ªè¡Œé€‰æ‹©
    icon: https://raw.githubusercontent.com/Centralmatrix3/Matrix-io/master/Gallery/Color/Apple-v2.png

  - name: AIä¸“çº¿
    type: select
    proxies:
      - ç¨³å®šä¼˜é€‰
      - åœ°åŒºèŠ‚ç‚¹
      - è‡ªè¡Œé€‰æ‹©
      - DIRECT
    icon: https://raw.githubusercontent.com/Centralmatrix3/Matrix-io/master/Gallery/Color/Robot.png

  - name: æ¸¸æˆåŠ é€Ÿ
    type: select
    proxies:
      - ç¨³å®šä¼˜é€‰
      - åœ°åŒºèŠ‚ç‚¹
      - è‡ªè¡Œé€‰æ‹©
      - DIRECT
    icon: https://raw.githubusercontent.com/Centralmatrix3/Matrix-io/master/Gallery/Color/Game.png

  # â€”â€” èŠ‚ç‚¹é€‰æ‹©åŒº â€”â€”
  - name: åœ°åŒºèŠ‚ç‚¹
    type: select
    proxies:
      - è‡ªåŠ¨é€‰æ‹©
      - é¦™æ¸¯èŠ‚ç‚¹
      - å°æ¹¾èŠ‚ç‚¹
      - æ—¥æœ¬èŠ‚ç‚¹
      - éŸ©å›½èŠ‚ç‚¹
      - ç‹®åŸèŠ‚ç‚¹
      - ç¾å›½èŠ‚ç‚¹
      - è‡ªè¡Œé€‰æ‹©
      - DIRECT
      - REJECT
    icon: https://raw.githubusercontent.com/Centralmatrix3/Matrix-io/master/Gallery/Color/Global.png

  - name: é¦™æ¸¯èŠ‚ç‚¹
    type: url-test
    include-all: true
    filter: "å®¶å®½|é¦™æ¸¯|æ¸¯|ğŸ‡­ğŸ‡°|HK|(?i)Hong"
    tolerance: 50
    interval: 1800
    lazy: true
    icon: https://raw.githubusercontent.com/Centralmatrix3/Matrix-io/master/Gallery/Color/HK.png

  - name: å°æ¹¾èŠ‚ç‚¹
    type: url-test
    include-all: true
    filter: "å®¶å®½|å°æ¹¾|å°|ğŸ‡¹ğŸ‡¼|TW|(?i)Taiwan"
    tolerance: 50
    interval: 1800
    lazy: true
    icon: https://raw.githubusercontent.com/Centralmatrix3/Matrix-io/master/Gallery/Color/TW.png

  - name: æ—¥æœ¬èŠ‚ç‚¹
    type: url-test
    include-all: true
    filter: "å®¶å®½|æ—¥æœ¬|æ—¥|ğŸ‡¯ğŸ‡µ|JP|(?i)Japan"
    tolerance: 50
    interval: 1800
    lazy: true
    icon: https://raw.githubusercontent.com/Centralmatrix3/Matrix-io/master/Gallery/Color/JP.png

  - name: éŸ©å›½èŠ‚ç‚¹
    type: url-test
    include-all: true
    filter: "å®¶å®½|éŸ©å›½|éŸ©|ğŸ‡°ğŸ‡·|KR|(?i)Korea"
    tolerance: 50
    interval: 1800
    lazy: true
    icon: https://raw.githubusercontent.com/Centralmatrix3/Matrix-io/master/Gallery/Color/KR.png

  - name: ç‹®åŸèŠ‚ç‚¹
    type: url-test
    include-all: true
    filter: "å®¶å®½|æ–°åŠ å¡|ç‹®|SG|ğŸ‡¸ğŸ‡¬|(?i)Singapore"
    tolerance: 50
    interval: 1800
    lazy: true
    icon: https://raw.githubusercontent.com/Centralmatrix3/Matrix-io/master/Gallery/Color/SG.png

  - name: ç¾å›½èŠ‚ç‚¹
    type: url-test
    include-all: true
    filter: "å®¶å®½|ç¾å›½|ç¾|US|ğŸ‡ºğŸ‡¸|(?i)States"
    tolerance: 50
    interval: 1800
    lazy: true
    icon: https://raw.githubusercontent.com/Centralmatrix3/Matrix-io/master/Gallery/Color/US.png

  # â€”â€” å…œåº•åŒº â€”â€”
  - name: é»‘ç™½åå•
    type: select
    proxies:
      - ç¨³å®šä¼˜é€‰
      - è‡ªåŠ¨é€‰æ‹©
      - åœ°åŒºèŠ‚ç‚¹
      - è‡ªè¡Œé€‰æ‹©
      - DIRECT
      - REJECT
    icon: https://raw.githubusercontent.com/Centralmatrix3/Matrix-io/master/Gallery/Color/Final.png

# [è§„åˆ™ï¼šGEOSITE + GEOIPï¼Œæè‡´ç²¾ç®€é“¾è·¯]

rules:
  # å¹¿å‘Šæ‹¦æˆª
  - GEOSITE,category-ads-all,REJECT

  # å±€åŸŸç½‘
  - GEOSITE,private,DIRECT

  # å¾®ä¿¡ç›´è¿
  - GEOSITE,wechat,DIRECT

  # è‹¹æœæœåŠ¡
  - GEOSITE,apple,è‹¹æœæœåŠ¡

  # â€”â€” AI ä¸“çº¿ï¼ˆOpenAI / Claude / GitHubï¼‰ â€”â€”
  - GEOSITE,openai,AIä¸“çº¿
  - GEOSITE,anthropic,AIä¸“çº¿
  - GEOSITE,github,AIä¸“çº¿

  # â€”â€” æ¸¸æˆåŠ é€Ÿï¼ˆSteam / PSN / Nintendoï¼‰ â€”â€”
  - GEOSITE,steam,æ¸¸æˆåŠ é€Ÿ
  - GEOSITE,ps,æ¸¸æˆåŠ é€Ÿ
  - GEOSITE,nintendo,æ¸¸æˆåŠ é€Ÿ

  # â€”â€” åª’ä½“æœåŠ¡ï¼ˆå›½å†… / æ¸¯å° / å›½å¤– è‡ªåŠ¨åˆ†æµåˆ° åª’ä½“æœåŠ¡ ç»„ï¼‰ â€”â€”
  - GEOSITE,category-media-cn,åª’ä½“æœåŠ¡
  - GEOSITE,category-media-hk-tw,åª’ä½“æœåŠ¡
  - GEOSITE,category-media,åª’ä½“æœåŠ¡

  # â€”â€” å›½å†…ç½‘ç«™ï¼ˆåŒä¿é™©ï¼‰ â€”â€”
  - GEOSITE,cn,DIRECT
  - GEOIP,CN,DIRECT

  # â€”â€” å›½å¤–ç½‘ç«™ï¼šç»Ÿä¸€èµ°ç¨³å®šä¼˜é€‰ â€”â€”
  - GEOSITE,geolocation-!cn,ç¨³å®šä¼˜é€‰

  # å…œåº•
  - MATCH,é»‘ç™½åå•

# [æœ¬åœ°èŠ‚ç‚¹ï¼šå·²ç»Ÿä¸€å‘½åï¼ˆå›½æ—— + åœ°åŒº + åè®®ï¼‰]

proxies:
  - name: "ğŸ‡¯ğŸ‡µ æ—¥æœ¬å®¶å®½ (Hysteria2)"
    type: hysteria2
    server: 47.91.14.159
    port: 22987
    auth: jndMFhHC02XaDl41wNkxvMYedEY
    fast-open: true
    alpn:
      - h3
    sni: bing.com
    servername: bing.com
    tls: true
    skip-cert-verify: true

  - name: "ğŸ‡ºğŸ‡¸ çˆªäº‘ (VLESS)"
    type: vless
    server: xui.hejiao.eu.org
    port: 443
    uuid: 65017978-8d21-4ef5-85ae-80c589522173
    tls: true
    network: ws
    cipher: ""
    flow: ""
    ws-opts:
      path: ""
      headers: {}

  - name: "ğŸ‡ºğŸ‡¸ xui (SS)"
    type: ss
    server: 104.161.60.208
    port: 45829
    cipher: aes-128-gcm
    password: QwErTyUiOp

# [HTTP è„šæœ¬ä¿ç•™ä¸ºç©º]
http:
  script: []
